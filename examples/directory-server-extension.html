<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M19 from src/site/apt/examples/directory-server-extension.apt at 2024-10-09
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M19" />
    <meta name="author" content="Brian Matthews" />
    <meta name="date" content="2024-08-08" />
    <title>DirectoryServerExtension Example – LDAPUnit</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.0.0-M11.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="https://bmatthews68.github.io/ldapuni">LDAPUnit</a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-10-09<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.0.0</li>
        <li class="pull-right"><span class="divider">|</span>
<a href="../../../pingidentity/ldapsdk">UnboundID</a></li>
        <li class="pull-right"><span class="divider">|</span>
<a href="https://junit.org/" class="externalLink">JUnit</a></li>
        <li class="pull-right"><a href="http://maven.apache.org/" class="externalLink">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html">Introduction</a></li>
   <li class="nav-header">Examples</li>
    <li class="active"><a>DirectoryServerExtension</a></li>
    <li><a href="../examples/directory-server-rule.html">DirectoryServerRule</a></li>
    <li><a href="../examples/directory-tester.html">DirectoryTester</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Coverage</li>
    <li><a href="../jacoco/index.html">JaCoCo</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" class="builtBy"><img class="builtBy" src="http://maven.apache.org/images/logos/maven-feather.png" /> Maven</a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="DirectoryServerExtension_Example"></a>
<h1>DirectoryServerExtension Example</h1>
<p><a href="../apidocs/com/buralotech/oss/ldapunit/DirectoryServerExtension.html">DirectoryServerExtension</a> is used launch an embedded LDAP directory server so that the unit tests written using JUnit 5 do not have to be dependent on an external LDAP directory server with unpredictable state.</p>
<pre class="prettyprint"><code>import com.buralotech.oss.ldapunit.DirectoryServerConfiguration;
import com.buralotech.oss.ldapunit.DirectoryServerExtension;
import org.junit.Rule;
import org.junit.Test;

@ExtendWith(DirectoryServerExtension.class)
@DirectoryServerConfiguration
public class Test {

  @Test
  public void testSomething() {
    // Unit test code that depends on LDAP directory server
  }

  @Test
  public void testSomethingWithTester(final DirectoryTester tester) {
    // Unit test code that depends on LDAP directory server using the tester
  }
}</code></pre>
<p>The <a href="../apidocs/com/buralotech.oss/ldapunit/DirectoryServerConfiguration.html">DirectoryServerConfiguration</a> annotation is used to provide the configuration parameters for the embedded LDAP directory server. The following parameters can be configured:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<td style="text-align: left;"><b>Name</b></td>
<td style="text-align: left;"><b>Description</b></td>
<td style="text-align: left;"><b>Default</b></td></tr>
<tr class="b">
<td style="text-align: left;">port</td>
<td style="text-align: left;">The TCP port that the LDAP directory server will be configured to listen on.</td>
<td style="text-align: left;">10389</td></tr>
<tr class="a">
<td style="text-align: left;">baseDN</td>
<td style="text-align: left;">The DN that will be configured as the root of the LDAP directory.</td>
<td style="text-align: left;">dc=buralotech,dc=com</td></tr>
<tr class="b">
<td style="text-align: left;">baseDNAttributes</td>
<td style="text-align: left;">The attribute name/value pairs to use when creating the base DN.</td>
<td style="text-align: left;"></td></tr>
<tr class="a">
<td style="text-align: left;">baseDNObjectClasses</td>
<td style="text-align: left;">The object classes to use used when creating the base DN.</td>
<td style="text-align: left;">domain,top</td></tr>
<tr class="b">
<td style="text-align: left;">authDN</td>
<td style="text-align: left;">The DN that will be configured as the administrator account identifier.</td>
<td style="text-align: left;">uid=admin,ou=system</td></tr>
<tr class="a">
<td style="text-align: left;">password</td>
<td style="text-align: left;">The password that will be configured as the authentication credentials for the administrator account.</td>
<td style="text-align: left;">secret</td></tr>
<tr class="b">
<td style="text-align: left;">ldifFiles</td>
<td style="text-align: left;">The locations of an optional LDIF files that can be used to seed the LDAP directory with an initial data set. The files may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the class path.</td>
<td style="text-align: left;"></td></tr>
<tr class="a">
<td style="text-align: left;">schemaFiles</td>
<td style="text-align: left;">The location of optional custom schema files that can be used to define the schema of the directory server. The files may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the classpath. `default` is a special value that indicates that the default schema should be loaded.</td>
<td style="text-align: left;"></td></tr></table>
<p>The following methods can be used to make assertions about or verify the contents of the LDAP directory:</p>
<ul>
<li><b>assertDNExists(String dn)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>verifyDNExists(String dn)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>assertDNIsA(String dn, String objectclass)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it is of type <b>objectclass</b>.</li>
<li><b>verifyDNIsA(String dn, String objectclass)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it is of type <b>objectclass</b>.</li>
<li><b>assertDNHasAttribute(String dn, String attributeName)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b>.</li>
<li><b>verifyDNHasAttribute(String dn, String attributeName)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b>.</li>
<li><b>assertDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - assert that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li>
<li><b>verifyDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li></ul></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2013–2024
<a href="https://www.buralotech.com">Buralo Technologies</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
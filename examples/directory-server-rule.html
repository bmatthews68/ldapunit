<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/apt/examples/directory-server-rule.apt at 14 Jan 2021

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <meta name="author" content="Brian Matthews" />
    <meta name="date" content="2021-01-14" />
    <title>LDAPUnit &#x2013; DirectoryServerRule Example</title>
    <link rel="stylesheet" href="../css/maven-base.css" />
    <link rel="stylesheet" href="../css/maven-theme.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-5713196-14', 'auto');
      ga('send', 'pageview');
      ga('set', 'anonymizeIp', true);
      ga('set', 'forceSSL', true);
    </script>
  </head>
  <body class="composite">
    <div id="banner">
<a href="http://ldapunit.btmatthews.com" id="bannerLeft">LDAPUnit
</a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 14 Jan 2021</span>
          &#xA0;| <span id="projectVersion">Version: 2.1.0</span>
      </div>
      <div class="xright"><a href="http://maven.apache.org/" class="externalLink" title="Maven">Maven</a> |
<a href="https://junit.org/" class="externalLink" title="JUnit">JUnit</a> |
<a href="../../../pingidentity/ldapsdk" title="UnboundID">UnboundID</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Overview</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Introduction">Introduction</a></li>
    </ul>
       <h5>Examples</h5>
    <ul>
     <li class="none"><a href="../examples/directory-server-extension.html" title="DirectoryServerExtension">DirectoryServerExtension</a></li>
     <li class="none"><strong>DirectoryServerRule</strong></li>
     <li class="none"><a href="../examples/directory-tester.html" title="DirectoryTester">DirectoryTester</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Coverage</h5>
    <ul>
     <li class="none"><a href="../jacoco/index.html" title="JaCoCo">JaCoCo</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="DirectoryServerRule_Example"></a>DirectoryServerRule Example</h2>
<p><a href="../apidocs/com/btmatthews/ldapunit/DirectoryServerRule.html">DirectoryServerRule</a> is used launch an embedded LDAP directory server so that the unit tests written using JUnit 4 do not have to be dependent on an external LDAP directory server with unpredictable state.</p>
<div class="source">
<pre>import com.btmatthews.ldapunit.DirectoryServerConfiguration;
import com.btmatthews.ldapunit.DirectoryServerRule;
import org.junit.Rule;
import org.junit.Test;

@DirectoryServerConfiguration
public class Test {

  @Rule
  public DirectoryServerRule directoryServerRule = new DirectoryServerRule();

  @Test
  public void testSomething() {
    // Unit test code that depends on LDAP directory server
  }
}</pre></div>
<p>The <a href="../apidocs/com/btmatthews/ldapunit/DirectoryServerConfiguration.html">DirectoryServerConfiguration</a> annotation is used to provide the configuration parameters for the embedded LDAP directory server. The following parameters can be configured:</p>
<table border="1" class="bodyTable">
<tr class="a">
<td align="left"><b>Name</b></td>
<td align="left"><b>Description</b></td>
<td align="left"><b>Default</b></td></tr>
<tr class="b">
<td align="left">port</td>
<td align="left">The TCP port that the LDAP directory server will be configured to listen on.</td>
<td align="left">10389</td></tr>
<tr class="a">
<td align="left">baseDN</td>
<td align="left">The DN that will be configured as the root of the LDAP directory.</td>
<td align="left">dc=btmatthews,dc=com</td></tr>
<tr class="b">
<td align="left">baseDNAttributes</td>
<td align="left">The attribute name/value pairs to use when creating the base DN.</td>
<td align="left"></td></tr>
<tr class="a">
<td align="left">baseDNObjectClasses</td>
<td align="left">The object classes to use used when creating the base DN.</td>
<td align="left">domain,top</td></tr>
<tr class="b">
<td align="left">authDN</td>
<td align="left">The DN that will be configured as the administrator account identifier.</td>
<td align="left">uid=admin,ou=system</td></tr>
<tr class="a">
<td align="left">password</td>
<td align="left">The password that will be configured as the authentication credentials for the administrator account.</td>
<td align="left">secret</td></tr>
<tr class="b">
<td align="left">ldifFiles</td>
<td align="left">The locations of an optional LDIF files that can be used to seed the LDAP directory with an initial data set. The files may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the class path.</td>
<td align="left"></td></tr>
<tr class="a">
<td align="left">schemaFiles</td>
<td align="left">The location of optional custom schema files that can be used to define the schema of the directory server. The files may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the classpath. `default` is a special value that indicates that the default schema should be loaded.</td>
<td align="left"></td></tr></table>
<p>The following methods can be used to make assertions about or verify the contents of the LDAP directory:</p>
<ul>
<li><b>assertDNExists(String dn)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>verifyDNExists(String dn)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>assertDNIsA(String dn, String objectclass)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it is of type <b>objectclass</b>.</li>
<li><b>verifyDNIsA(String dn, String objectclass)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it is of type <b>objectclass</b>.</li>
<li><b>assertDNHasAttribute(String dn, String attributeName)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b>.</li>
<li><b>verifyDNHasAttribute(String dn, String attributeName)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b>.</li>
<li><b>assertDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - assert that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li>
<li><b>verifyDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li></ul></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2013&#x2013;2021<a href="http://www.btmatthews.com">Brian Matthews</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>

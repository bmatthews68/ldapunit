<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 08 Aug 2016 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>LDAPUnit &#x2013; DirectoryServerRule Example</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Brian Matthews" />
    <meta name="Date-Creation-yyyymmdd" content="20160808" />
    <meta name="Date-Revision-yyyymmdd" content="20160808" />
    <meta http-equiv="Content-Language" content="en" />
        
          <!-- Google Analytics -->
    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5713196-14']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://ldapunit.btmatthews.com" id="bannerLeft">
                LDAPUnit
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 08 Aug 2016</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1.2</span>
                      </div>
            <div class="xright">                    <a href="http://maven.apache.org/" class="externalLink" title="Maven 2">Maven 2</a>
            |
                        <a href="http://github.com/KentBeck/junit" class="externalLink" title="JUnit">JUnit</a>
            |
                        <a href="https://www.unboundid.com/products/ldap-sdk/" class="externalLink" title="UnboundID">UnboundID</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
            <strong>DirectoryServerRule</strong>
          </li>
                  <li class="none">
                          <a href="../examples/directory-tester.html" title="DirectoryTester">DirectoryTester</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                               <a href="http://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Copyright 2013-2016 Brian Thomas Matthews --><!--  --><!-- Licensed under the Apache License, Version 2.0 (the "License"); --><!-- you may not use this file except in compliance with the License. --><!-- You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><div class="section">
<h2><a name="DirectoryServerRule_Example"></a>DirectoryServerRule Example</h2>
<p><a href="../apidocs/com/btmatthews/ldapunit/DirectoryServerRule.html">DirectoryServerRule</a> is used launch an embedded LDAP directory server so that the unit tests do not have to be dependent on an external LDAP directory server with unpredictable state.</p>
<div class="source">
<pre>import com.btmatthews.ldapunit.DirectoryServerConfiguration;
import com.btmatthews.ldapunit.DirectoryServerRule;
import org.junit.Rule;
import org.junit.Test;

@DirectoryServerConfiguration
public class Test {

  @Rule
  public DirectoryServerRule directoryServerRule = new DirectoryServerRule();

  @Test
  public void testSomething() {
    // Unit test code that depends on LDAP directory server
  }
}</pre></div>
<p>The <a href="../apidocs/com/btmatthews/ldapunit/DirectoryServerConfiguration.html">DirectoryServerConfiguration</a> annotation is used to provide the configuration parameters for the embedded LDAP directory server. The following parameters can be configured:</p>
<table border="1" class="bodyTable">
<tr class="a">
<td align="left"><b>Name</b></td>
<td align="left"><b>Description</b></td>
<td align="left"><b>Default</b></td></tr>
<tr class="b">
<td align="left">port</td>
<td align="left">The TCP port that the LDAP directory server will be configured to listen on.</td>
<td align="left">10389</td></tr>
<tr class="a">
<td align="left">baseDN</td>
<td align="left">The DN that will be configured as the root of the LDAP directory.</td>
<td align="left">dc=btmatthews,dc=com</td></tr>
<tr class="b">
<td align="left">authDN</td>
<td align="left">The DN that will be configured as the administrator account identifier.</td>
<td align="left">uid=admin,ou=system</td></tr>
<tr class="a">
<td align="left">password</td>
<td align="left">The password that will be configured as the authentication credentials for the administrator account.</td>
<td align="left">secret</td></tr>
<tr class="b">
<td align="left">ldifFile</td>
<td align="left">The location of an optional LDIF file that can be used to seed the LDAP directory with an initial data set. The file may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the class path.</td>
<td align="left"></td></tr>
<tr class="a">
<td align="left">ldifFiles</td>
<td align="left">The locations of an optional LDIF files that can be used to seed the LDAP directory with an initial data set. The files may be located on the file system or the classpath. The classpath is checked first and then falls back to the file system if it was not found on the class path.</td>
<td align="left"></td></tr></table>
<p>The following methods can be used to make assertions about or verify the contents of the LDAP directory:</p>
<ul>
<li><b>assertDNExists(String dn)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>verifyDNExists(String dn)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b>.</li>
<li><b>assertDNIsA(String dn, String objectclass)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it is of type <b>objectclass</b>.</li>
<li><b>verifyDNIsA(String dn, String objectclass)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it is of type <b>objectclass</b>.</li>
<li><b>assertDNHasAttribute(String dn, String attributeName)</b> - asserts that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b>.</li>
<li><b>verifyDNHasAttribute(String dn, String attributeName)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b>.</li>
<li><b>assertDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - assert that an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li>
<li><b>verifyDNHasAttributeValue(String dn, String attributeName, String... attributeValue)</b> - tests to see if an entry exists in the LDAP directory with the distinguished name of <b>dn</b> and check that it has an attribute named <b>attributeName</b> with value(s) <b>attributeValues</b>.</li></ul></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2013&#x2013;2016
                        <a href="http://btmatthews.com">Brian Matthews</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
